% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ind_ProtConn.R
\name{ind_ProtConn}
\alias{ind_ProtConn}
\title{Calculate the Protected Area Connectivity Index (ProtConn)}
\usage{
ind_ProtConn(
  distkm,
  dkm,
  bioregion,
  area = NULL,
  stepcutoff = 3,
  probcutoff = 1e-04,
  returns = "PC"
)
}
\arguments{
\item{distkm}{distance matrix in km. Can be created by the 'in_sea_distance()' in this package}

\item{dkm}{median dispersal distance in km for the negative exponential dispersal kernal (i.e. \code{p <- 1-pexp(distkm,log(2)/dkm)})}

\item{bioregion}{sf polygon of the study area (i.e. the sea!)}

\item{area}{output of data_CPCAS_areas}

\item{stepcutoff}{Maximum length of the paths (i.e. stepping stones) that are considered. Default is 3 (i.e. start -> stepping stone -> end) for a single stepping stone. If negative, no cutoff is used but will greatly increase computational requirements.}

\item{probcutoff}{Minimum probability of a connection between two areas. Default is 0.0001, i.e. any probability lower than 1 in 10000 is considered unconnected.}

\item{returns}{string describing what the function should return. By default, "PC", the function returns the ProtConn value. To return a data frame with the edge list of the network use "EL".}
}
\value{
If \code{returns = "PC"}, a numeric value representing the
Protected Area Connectivity index (percentage) for the bioregion.
If \code{returns = "EL"}, a data frame with columns:
\describe{
\item{\code{to}}{Target area name.}
\item{\code{to_area}}{Target area size.}
\item{\code{from}}{Source area name.}
\item{\code{from_area}}{Source area size.}
\item{\code{pstar}}{Maximum path probability connecting the two areas.}
\item{\code{p}}{Direct dispersal probability from the distance kernel.}
\item{\code{product}}{Weighted contribution to global connectivity.}
}
}
\description{
Computes the connectivity of protected areas based on distances,
dispersal kernels, and area sizes. The function uses a graph-based
approach to estimate the probability of movement between protected
areas, producing either a global connectivity index (PC) or an
edge-level table of pairwise connection probabilities (EL).
}
\details{
The function calculates a distance-based dispersal probability for
each pair of areas using an exponential kernel:
\deqn{p = 1 - \exp(-\log(2) \cdot dist / dkm)}
Probabilities below \code{probcutoff} are treated as zero.

The probability matrix is converted into an \pkg{igraph} object, and
all simple paths up to \code{stepcutoff} steps are considered to
compute the maximum connection probability (\code{pstar}) for each
area pair. Edge-level products are weighted by the source and target
area sizes to compute the global connectivity index:
\deqn{PC = 100 \cdot \frac{\sqrt{\sum(product)}}{\sum(area(bioregion))}}
}
\examples{
\dontrun{
require(MarConsNetData)
bioregion <- data_bioregion()
areas <- data_CPCAD_areas(bioregion,zones=FALSE) |>
  dplyr::mutate(area=sf::st_area(geoms))
distkm <- calc_in_sea_distance(cellsize=100000,bioregion,areas)
PC <- ind_ProtConn(distkm,dkm=100, area=areas)
}

}
